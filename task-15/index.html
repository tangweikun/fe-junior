<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>复选框（checkbox）全选/全不选/返选</title>
    <link href="index.css" rel="stylesheet" />
    <script type="text/javascript">
        window.onload = function() {
            var oA = document.getElementsByTagName('a')[0];
            var oInput = document.getElementsByTagName('input');
            var oLabel = document.getElementsByTagName('label')[0];
            var isCheckAll = function() {
                for (var i = 1, n = 0; i < oInput.length; i++) {
                    oInput[i].checked && n++;
                }
                oInput[0].checked = n == oInput.length - 1;
                oLabel.innerHTML = oInput[0].checked ? '全不选' : '全选';
            };
            //全选/全不选
            oInput[0].onclick = function() {
                for (var i = 1; i < oInput.length; i++) {
                    oInput[i].checked = this.checked;
                }
                isCheckAll();
            };
            //反选
            oA.onclick = function() {
                for (var i = 1; i < oInput.length; i++) {
                    oInput[i].checked = !oInput[i].checked;
                }
                isCheckAll();
            };
            //根据复选个数更新全选框状态
            for (var i = 1; i < oInput.length; i++) {
                oInput[i].onclick = function() {
                    isCheckAll();
                };
            }
        };
    </script>
</head>

<body>
    <div class="wrapper">
        <div class="header">
            <input type="checkbox" id="checkAll" /><label for="checkAll">全选</label><a href="javascript:;">反选</a>
        </div>
        <div>
            <p><input type="checkbox" name="item" /><label>选项（一）</label></p>
            <p><input type="checkbox" name="item" /><label>选项（二）</label></p>
            <p><input type="checkbox" name="item" /><label>选项（三）</label></p>
        </div>
    </div>
    <center>1、切换全选/全不选文字；2、根据选中个数更新全选框状态；</center>
</body>

</html>